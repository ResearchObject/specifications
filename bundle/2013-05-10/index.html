<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <title>Wf4Ever Research Object Bundle</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <!-- 
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->
    <!--
    <script src='http://dev.w3.org/2009/dap/ReSpec.js/js/respec.js' class='remove'></script> 
    -->
    
    
    <style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;   
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;    
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* --- Best Practices --- */
div.practice {
    border: solid #bebebe 1px;
    margin: 2em 1em 1em 2em;
}

span.practicelab {
    margin: 1.5em 0.5em 1em 1em;
    font-weight: bold;
    font-style: italic;
    background: #dfffff;
    position: relative;
    padding: 0 0.5em;
    top: -1.5em;
}

p.practicedesc {
    margin: 1.5em 0.5em 1em 1em;
}

@media screen {
    p.practicedesc {
        position: relative;
        top: -2em;
        padding: 0;
        margin: 1.5em 0.5em -1em 1em;
    }
}
</style><link rel="stylesheet" href="wf4ever.css" type="text/css">
    <link rel="stylesheet" href="http://www.w3.org/StyleSheets/TR/w3c-unofficial" type="text/css">
  <style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #ff4500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}
</style><link rel="stylesheet" href="//www.w3.org/StyleSheets/TR/w3c-unofficial"><!--[if lt IE 9]><script src='http://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--></head>
  <body class="wf4ever h-entry"><div class="head">
  <p>
    
  </p>
  <h1 class="title p-name" id="title"><abbr title="Workflow forever">Wf4Ever</abbr> Research Object Bundle</h1>
  
  <h2 id="unofficial-draft-10-may-2013">Working Draft <time class="dt-published" datetime="2013-05-10">10 May 2013</time></h2>
  <dl>
    
      <dt>This version:</dt>
      <dd><a href="http://purl.org/wf4ever/ro-bundle/2013-05-10/">http://purl.org/wf4ever/ro-bundle/2013-05-10/</a></dd>
    
      <dt>Latest recommendation:</dt>
      <dd><a href="http://purl.org/wf4ever/ro-bundle/">http://purl.org/wf4ever/ro-bundle/</a></dd>
    
      <dt>Latest editor's draft:</dt>
      <dd><a href="http://purl.org/wf4ever/ro-bundle/draft/">http://purl.org/wf4ever/ro-bundle/draft/</a></dd>
    
    
    <dt>Editor:</dt>
    <dd class="p-author h-card vcard"><a class="u-url url p-name fn" href="http://soiland-reyes.com/stian/work/">Stian Soiland-Reyes</a>, University of Manchester</dd>

    
    
  </dl>
  
  
  
  
    
      
        <p class="copyright">
          This document is licensed under a 
          <a class="subfoot" href="http://creativecommons.org/licenses/by/3.0/" rel="license">Creative Commons 
          Attribution 3.0 License</a>.
        </p>
      
    
  
  <hr>
</div>
    <div class="logo"><img src="../../logo/wf4ever.png" height="100" alt="Wf4Ever"></div>
    <div class="status"><div><span><abbr title="Workflow forever">Wf4Ever</abbr> Working Draft</span></div></div>
    <section id="abstract" class="introductory"><h2>Abstract</h2>
    <p>
        This specification defines a file format for storage and 
        distribution of Research Objects as a ZIP archive; called a
        <strong>Research Object Bundle</strong> (<abbr title="Research Object">RO</abbr> Bundle). <abbr title="Research Object">RO</abbr> Bundles
        allow capturing a Research Object to a single file or
        byte-stream by including its manifest, annotations and some or
        all of its aggregated resources for the purposes of exporting,
        archiving, publishing and transferring research objects. </p>
    </section><section id="sotd" class="introductory"><h2>Status of This Document</h2>
  
    <p>
      This document is merely a public working draft of a potential specification. It has
      no official standing of any kind and does not represent the support or consensus of any
      standards organisation.
    </p>
    
    This document is an Working Draft published by the 
    <a href="http://www.wf4ever-project.org/"><abbr title="Workflow forever">Wf4Ever</abbr> project</a>.

    This document is currently work in progress and should not be used as a
    basis for implementations. Questions, feedback and comments are
    kindly requested to be sent to the <a href="https://groups.google.com/forum/#!forum/wf4ever-public">wf4ever-public</a>
    mailing list/forum.
    
  
</section><section id="toc"><h2 class="introductory">Table of Contents</h2><ul class="toc"><li class="tocline"><a href="#introduction" class="tocxref"><span class="secno">1. </span>Introduction</a></li><li class="tocline"><a href="#container" class="tocxref"><span class="secno">2. </span>Container</a><ul class="toc"><li class="tocline"><a href="#ucf" class="tocxref"><span class="secno">2.1 </span>Universal Container Format (UCF)</a></li><li class="tocline"><a href="#ro-bundle-container" class="tocxref"><span class="secno">2.2 </span><abbr title="Research Object">RO</abbr> bundle container</a><ul class="toc"><li class="tocline"><a href="#media-types" class="tocxref"><span class="secno">2.2.1 </span>Resource media type</a></li><li class="tocline"><a href="#manifest-xml" class="tocxref"><span class="secno">2.2.2 </span>META-INF/manifest.xml</a></li></ul></li></ul></li><li class="tocline"><a href="#manifest" class="tocxref"><span class="secno">3. </span>Manifest</a><ul class="toc"><li class="tocline"><a href="#manifest-json" class="tocxref"><span class="secno">3.1 </span>.ro/manifest.json</a><ul class="toc"><li class="tocline"><a href="#json-ld" class="tocxref"><span class="secno">3.1.1 </span>JSON-LD and mapping to <abbr title="Research Object">RO</abbr> model</a></li><li class="tocline"><a href="#custom-json-ld" class="tocxref"><span class="secno">3.1.2 </span>Custom JSON-LD</a></li></ul></li><li class="tocline"><a href="#alternative-manifest-representations" class="tocxref"><span class="secno">3.2 </span>Alternative manifest representations</a></li></ul></li><li class="tocline"><a href="#identifiers" class="tocxref"><span class="secno">4. </span>Identifiers</a><ul class="toc"><li class="tocline"><a href="#absolute-uris" class="tocxref"><span class="secno">4.1 </span>Absolute URIs for bundle resources</a><ul class="toc"><li class="tocline"><a href="#path-uris" class="tocxref"><span class="secno">4.1.1 </span>Nested paths</a></li><li class="tocline"><a href="#hash-uris" class="tocxref"><span class="secno">4.1.2 </span>Fragment identifiers</a></li><li class="tocline"><a href="#jar" class="tocxref"><span class="secno">4.1.3 </span>jar: scheme</a></li><li class="tocline"><a href="#widget" class="tocxref"><span class="secno">4.1.4 </span>Widget URI scheme</a></li></ul></li></ul></li><li class="tocline"><a href="#conformance" class="tocxref"><span class="secno">5. </span>Conformance</a></li><li class="tocline"><a href="#acknowledgements" class="tocxref"><span class="secno">A. </span>Acknowledgements</a></li><li class="tocline"><a href="#references" class="tocxref"><span class="secno">B. </span>References</a><ul class="toc"><li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">B.1 </span>Normative references</a></li><li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">B.2 </span>Informative references</a></li></ul></li></ul></section>
    

    
    <section class="informative" id="introduction">
      <!--OddPage--><h2><span class="secno">1. </span>Introduction</h2><p><em>This section is non-normative.</em></p>
        <p>
            The <a href="http://purl.org/wf4ever/model"><abbr title="Workflow forever">Wf4Ever</abbr> Research
            Object model</a> [<cite><a class="bibref" href="#bib-RO">RO</a></cite>]
            defines a model for aggregating the resources that contribute to a
            scientific work, including domain-specific annotations and
            provenance traces. The unit that collects these resources is called
            a <em>Research Object</em> (<abbr title="Research Object">RO</abbr>)
            and is described in an RDF-based manifest
            according to the <abbr title="Workflow forever">Wf4Ever</abbr> OWL
            ontologies.  The <abbr title="Research Object">RO</abbr> model has been formed in particular for
            the purpose of preservation of scientific workflows, but is
            applicable also in a
            general sense for capturing resources that are related to
            eacher, and which together form a trackable whole.
            The <a href="">Research Object primer</a> [<cite><a class="bibref" href="#bib-ROPrimer">ROPrimer</a></cite>] provides
            further details and examples of using the <abbr title="Research Object">RO</abbr> model.
        </p>
        <p>
        The <a href="http://purl.org/wf4ever/model">specification for the <abbr title="Research Object">RO</abbr>
        model</a> does not mandate any particular form for the representation
        of Research Objects.  The <abbr title="Workflow forever">Wf4Ever</abbr> <a href="http://www.wf4ever-project.org/wiki/display/docs/RO+SRS+interface+6"><abbr title="Research Object">RO</abbr>
        Storage and Retrieval Service API</a> [<cite><a class="bibref" href="#bib-ROSRS">ROSRS</a></cite>] defines how
        research objects
        can be accessed and maintained on the web through a RESTful web
        service exposing RDF/XML and Turtle representations. Practical
        use of the <abbr title="Research Object">RO</abbr> model has however shown that it is also benefitial
        to represent a research object as a single
        ZIP archive or as file system folders for the purposes of
        downloading, editing and archiving a research object. 
        </p><p>
        For instance a scientific workflow system can export a workflow
        run by saving the workflow definition, runtime provenance trace and
        generated results to a set of files. A research object that
        represents the workflow run can aggregate and relate these
        resources. However, at the time of running the workflow (e.g. on a
        desktop computer) it is often not known where or if the user would
        choose to publish the <abbr title="Research Object">RO</abbr>; thus the direct use of a ROSRS service
        or minting public URIs is problematic in this situation.
        </p><p>
        A <strong>Research Object Bundle</strong>, as specified by this
document, provides a way to collect the resources that are aggregated in a
research object, represented as files in a ZIP archive, in addition to their
metadata and annotations. The ZIP archive thus becomes a single representation
of a research object and which can be exported, archived, published and
transferred like a regular file or resource.
        </p>
    </section>
    <section id="container">
        <!--OddPage--><h2><span class="secno">2. </span>Container</h2>
        <p>
        A Research Object Bundle is a structured [<cite><a class="bibref" href="#bib-ZIP">ZIP</a></cite>] archive, specializing
        the <a href="https://learn.adobe.com/wiki/display/PDFNAV/UCF+overview">Adobe Universal Container Format</a> [<cite><a class="bibref" href="#bib-UCF">UCF</a></cite>]. UCF is
        based on the EPUB [<cite><a class="bibref" href="#bib-OCF">OCF</a></cite>] format, but generalized to be any kind of
        container. The following section gives an informal introduction to the 
        UCF format. For the complete, normative details, see the [<cite><a class="bibref" href="#bib-UCF">UCF</a></cite>] specification.
        </p>
        <section id="ucf" class="informative">
            <h3><span class="secno">2.1 </span>Universal Container Format (UCF)</h3><p><em>This section is non-normative.</em></p>
            <p>
            An UCF container is based on the ZIP compression file format [<cite><a class="bibref" href="#bib-ZIP">ZIP</a></cite>], enforcing <a href="https://learn.adobe.com/wiki/display/PDFNAV/Zip+container">additional restrictions</a>. The most important restrictions are:
            </p><ul>
                <li>Reserved filenames in the root directory:
                    <code>mimetype</code> and <code>META-INF</code></li>
                <li>Filenames must be encoded in UTF-8</li>
                <li>Compression must be Uncompressed or Flate</li>
                <li><em class="rfc2119" title="MAY">MAY</em> use Zip64 extensions, but <em class="rfc2119" title="SHOULD">SHOULD</em> only do so when required</li>
                <li>The first file <em class="rfc2119" title="MUST">MUST</em> be the uncompressed <code>mimetype</code> and without any extra attributes</li>
            </ul>
            <p>UCF says about <code>mimetype</code>:
            </p>
            <blockquote cite="https://learn.adobe.com/wiki/display/PDFNAV/Zip+container">
            The first file in the Zip container <em class="rfc2119" title="MUST">MUST</em> be a file with the ASCII
            name of <code>mimetype</code>, which holds the MIME type for the Zip
            container (<del>application/epub+zip</del> as an ASCII string; no
            padding, white-space, or case change). 
            </blockquote>
            <p>
            The actual media type to include in <code>mimetype</code> depends
            on the specific container type (the above quote uses ePub as
            an example). 
            See <a href="#ro-bundle-container" class="sectionRef sec-ref">section 2.2 RO bundle container</a>.
            </p>
            <div class="practice">
                <p><span class="practicelab" id="mimetype-zip">Best Practice 1: Use zip -0 -X</span></p>
                <p class="practicedesc">
                To add the <code>mimetype</code> file correctly on a UNIX/Linux
installation with <a href="http://www.infonn-zip.org/">InfoZip</a>, use
<code>echo -n</code> and <code>zip -0 -X</code>. Below is an example which adds
<code>mimetype</code> correctly as the first, uncompressed file, then the remaining files (excluding <code>mimetype</code>) with the default compression: </p>
            </div>
            <div class="example"><div class="example-title"><span>Example 1</span></div><pre class="example">stain@ahtissuntu:~/test$ echo -n application/vnd.wf4ever.robundle+zip &gt; mimetype 

stain@ahtissuntu:~/test$ zip -0 -X ../example.robundle mimetype
  adding: mimetype (stored 0%)

stain@ahtissuntu:~/test$ zip -X -r ../example.robundle . -x mimetype
  adding: META-INF/ (stored 0%)
  adding: META-INF/container.xml (stored 0%)
  adding: .ro/ (stored 0%)
  adding: .ro/manifest.json (stored 0%)
  adding: helloworld.txt (stored 0%)</pre></div>
            <p>UCF says about <a href="https://learn.adobe.com/wiki/display/PDFNAV/UCF+container+contents#UCFcontainercontents-ContainerMETA-INFcontainerxmlOptional"><code>META-INF/container.xml</code></a>
            and rootfiles:
            </p>
            <blockquote cite="https://learn.adobe.com/wiki/display/PDFNAV/UCF+container+contents#UCFcontainercontents-ContainerMETA-INFcontainerxmlOptional">
                A UCF Container <em class="rfc2119" title="MAY">MAY</em> include a file named
                <code>container.xml</code> in the <code>META-INF</code>
                directory at the root level of the container file system. If
                present, the <code>container.xml</code> file <em class="rfc2119" title="MAY">MAY</em> identify
                the MIME type of, and path to, the root file for the
                container and any <em class="rfc2119" title="OPTIONAL">OPTIONAL</em> alternative renditions included
                in the container.  
            </blockquote>
            <p>
            An example of <code>META-INF/container.xml</code> which
            defines the <em>rootfile</em> as <code>.ro/manifest.json</code>:
            </p>
            <div class="example"><div class="example-title"><span>Example 2</span></div><pre class="example">&lt;?xml version="1.0"?&gt;
&lt;container version="1.0"
    xmlns="urn:oasis:names:tc:opendocument:xmlns:container"&gt;
    &lt;rootfiles&gt;
        &lt;rootfile full-path=".ro/manifest.json" media-type="application/ld+json" /&gt;
    &lt;/rootfiles&gt;
&lt;/container&gt;</pre></div>
        </section>
        <section id="ro-bundle-container">
        <h3><span class="secno">2.2 </span><abbr title="Research Object">RO</abbr> bundle container</h3>
        The <abbr title="Research Object">RO</abbr> Bundle container is a specialization of a [<cite><a class="bibref" href="#bib-UCF">UCF</a></cite>] container, with
        the following additions:
        <ul>
            <li>Additional reserved filename in the root directory: <code>.ro</code></li>
            <li>The <code>mimetype</code> <em class="rfc2119" title="SHOULD">SHOULD</em> be
              <code>application/vnd.wf4ever.robundle+zip</code> (see
              below)</li>
            <li>The <code>META-INF/container.xml</code>, if present,
                <em class="rfc2119" title="SHOULD">SHOULD</em> contain a rootfile entry equivalent to:<br>
                <code>&lt;rootfile full-path=".ro/manifest.json"
                media-type="application/ld+json" /&gt;</code>
            </li> 
            <li>The file <code>.ro/manifest.json</code> <em class="rfc2119" title="SHOULD">SHOULD</em> be
            present, and <em class="rfc2119" title="MUST">MUST</em> describe the <abbr title="Research Object">RO</abbr> according to <a href="#manifest" class="sectionRef sec-ref">section 3. Manifest</a>.
            </li>
        </ul>
        <p>
            Applications who specialize <abbr title="Research Object">RO</abbr> Bundles <em class="rfc2119" title="MAY">MAY</em> specify a different
            <code>mimetype</code>, for instance because the 
            bundle is used to distribute application-specific data. It is
            <em class="rfc2119" title="RECOMMENDED">RECOMMENDED</em> for such extensions that their media type end
            with <a href="http://tools.ietf.org/html/rfc6839#section-3.6">+zip</a>
            according to [<cite><a class="bibref" href="#bib-RFC6839">RFC6839</a></cite>] unless it is not considered
            meaningful for a user to treat such bundles
            as a general ZIP archive.
        </p>
        <section id="media-types">
        <h4><span class="secno">2.2.1 </span>Resource media type</h4>
        <p>
          Beyond rootfiles, the UCF specification does not specify how
          to find the media-type when resolving individual resources in
          a bundle. If an application requrires a media-type for a resource
          in the <abbr title="Research Object">RO</abbr> bundle, it <em class="rfc2119" title="MAY">MAY</em> use the defaults below based on
          case-insensitive comparison of the file extension. 
          In the absence of a resolved media type, the media type
          <code>application/octet-stream</code> <em class="rfc2119" title="MAY">MAY</em> be assumed.
          </p>
          <table>
            <tbody><tr><th>Extension</th> <th>Media type</th></tr>
            <tr>
               <td><code>.txt</code></td>
               <td><code>text/plain; charset="utf-8"</code></td>
            </tr><tr>
               <td><code>.ttl</code></td>
               <td><code>text/turtle; charset="utf-8"</code></td>
            </tr><tr>
               <td><code>.rdf</code></td>
               <td><code>application/rdf+xml</code></td>
            </tr><tr>
               <td><code>.json</code></td>
               <td><code>application/json</code></td>
            </tr><tr>
               <td><code>.xml</code></td>
               <td><code>application/xml</code></td>
            </tr>
          </tbody></table>
          <p>Applications <em class="rfc2119" title="MAY">MAY</em> use the file
          <code>META-INF/manifest.xml</code>, if present, to resolve
          media types for resources in the <abbr title="Research Object">RO</abbr> bundle accoording to
          the <code>manifest:media-type</code> of the corresponding
          <code>manifest:file-entry</code> according to
          <a href="http://docs.oasis-open.org/office/v1.2/os/OpenDocument-v1.2-os-part3.html#__RefHeading__752807_826425813">ODF
          Package specification</a> [<cite><a class="bibref" href="#bib-ODF">ODF</a></cite>], see however warnings in <a href="#manifest-xml" class="sectionRef sec-ref">section 2.2.2 META-INF/manifest.xml</a> below.
          </p>
          </section>
          <section id="manifest-xml">
          <h4><span class="secno">2.2.2 </span>META-INF/manifest.xml</h4>
          <p>
          To avoid confusion with the somewhat overlapping 
          <a href="#manifest"><abbr title="Research Object">RO</abbr> manifest</a> it is <em class="rfc2119" title="NOT
          RECOMMENDED">NOT
          RECOMMENDED</em> to include <code>META-INF/manifest.xml</code> in
          <abbr title="Research Object">RO</abbr> Bundles. Applications and specializations of this specification <em class="rfc2119" title="MAY">MAY</em>
          however include 
          <code>META-INF/manifest.xml</code>, for instance to provide
          media types as specified in 
          <a href="#media-types" class="sectionRef sec-ref">section 2.2.1 Resource media type</a>. 
          </p>
          <p>If
          <code>META-INF/manifest.xml</code> is present, it <em class="rfc2119" title="MUST">MUST</em> 
          follow the specifications of
          <a href="http://docs.oasis-open.org/office/v1.2/os/OpenDocument-v1.2-os-part3.html#__RefHeading__752807_826425813">ODF
          Package specification</a> [<cite><a class="bibref" href="#bib-ODF">ODF</a></cite>]
          . That means that 
          if present, the <code>META-INF/manifest.xml</code> file
          <em class="rfc2119" title="MUST">MUST</em> list <strong>all</strong> resources in the <abbr title="Research Object">RO</abbr> bundle, including
          the folder <code>.ro</code> and its content, but excluding
          <code>mimetype</code> and
          <code>META-INF</code> its content.
        </p>
        </section>

        <p>

        </p>
      </section>
    </section>

    <section id="manifest">
    <!--OddPage--><h2><span class="secno">3. </span>Manifest</h2>
    <p>
    The research object <em class="rfc2119" title="SHOULD">SHOULD</em> be described 
    in the file <code>.ro/manifest.json</code> as specified 
    below.

    </p><section id="manifest-json">
    <h3><span class="secno">3.1 </span>.ro/manifest.json</h3>
    <p>
    The file <code>.ro/manifest.json</code>, if present, <em class="rfc2119" title="MUST">MUST</em> contain
    the [<cite><a class="bibref" href="#bib-ORE">ORE</a></cite>] manifest for the research object according to this section.
    The file <em class="rfc2119" title="MUST">MUST</em> be in <a href="http://json.org/">JSON format</a>
    [<cite><a class="bibref" href="#bib-RFC4627">RFC4627</a></cite>], and <em class="rfc2119" title="SHOULD">SHOULD</em> be valid [<cite><a class="bibref" href="#bib-JSON-LD">JSON-LD</a></cite>].
    </p>
    <p>
    Identifiers used below are either:
    </p>
    <ol>
      <li>Meta-resources, path relative to <code>.ro/</code> folder,
          which <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> contain the <code>:</code> character.  For
          instance <code>manifest.json</code>  or <code>annotations/ann2</code>.
          Depending on how meta-resources are used, the ZIP might or might not include 
          a corresponding entry for the given path.
      </li>
      <li>Bundled resources 
          The path <em class="rfc2119" title="SHOULD">SHOULD</em> starts with <code>bundle:</code> to indicate the root of the
          bundle, for instance <code>bundle:hello.txt</code> or
          <code>bundle:folder2/</code>. Folders <em class="rfc2119" title="SHOULD">SHOULD</em> have a path
          terminating with <code>/</code>.
          The resource identified by the path <em class="rfc2119" title="SHOULD">SHOULD</em> be included as a
          corresponding file or folder in the ZIP file.  
      </li>
      <li>
          Absolute URIs (contains <code>:</code>), external to the bundle. For instance
          <code>http://example.com/external</code>
      </li>
      
    </ol>
    <p>The structure of the JSON manifest is given by an JSON Object
    with the keys:
    </p>
    <dl>
        <dt><code>@context</code></dt> <dd>JSON-LD context. <em class="rfc2119" title="MUST">MUST</em> be
        present. <em class="rfc2119" title="SHOULD">SHOULD</em> have value
        <code>"http://purl.org/wf4ever/ro-bundle/context.json"</code>,
        but <em class="rfc2119" title="MAY">MAY</em> be a list, which <em class="rfc2119" title="SHOULD">SHOULD</em> have this value as the last item.  </dd>
        <dt><code>id</code></dt> <dd><abbr title="Research Object">RO</abbr> identifier. <em class="rfc2119" title="SHOULD">SHOULD</em> be present, in which case it
        <em class="rfc2119" title="SHOULD">SHOULD</em> have the fixed value <code>"bundle:"</code> indicating the
        relative top-level folder as the identifier.
        Note that this means the absolute URI identifying the research
        object depends on the base URI this Research Object Bundle is
        considered to be accessed at, for instance
        <code>file:///Users/alice/ro13.robundle/</code> (See
                <a href="#identifiers" class="sectionRef sec-ref">section 4. Identifiers</a>.)</dd>

        <dt><code>manifest</code> </dt><dd>ORE manifests describing this <abbr title="Research Object">RO</abbr>,
        relative to the <code>.ro/</code> folder. <em class="rfc2119" title="SHOULD">SHOULD</em> be literal
        <code>"manifest.json"</code>,
            but <em class="rfc2119" title="MAY">MAY</em> be a list, in which case the list <em class="rfc2119" title="MUST">MUST</em> contain
            <code>"manifest.json"</code></dd>

        <dt><code>createdOn</code></dt> <dd>The time the <abbr title="Research Object">RO</abbr> was
        serialized as this <abbr title="Research Object">RO</abbr> bundle. <em class="rfc2119" title="SHOULD">SHOULD</em> be present, in which case it <em class="rfc2119" title="MUST">MUST</em> be a 
        <a href="http://www.w3.org/TR/xmlschema-2/#dateTime">xsd:dateTime
        formatted</a> timestamp (ISO 8601).</dd>    

        <dt><code>createdBy</code></dt> <dd>The creator of the <abbr title="Research Object">RO</abbr>
        bundle. This <em class="rfc2119" title="MAY">MAY</em> be different from the person forming the
        research object, which <em class="rfc2119" title="SHOULD">SHOULD</em> be indicated with
        <code>authoredBy</code>. The creator <em class="rfc2119" title="SHOULD">SHOULD</em> be an object
        with the following keys:
        <dl>
            <dt><code>uri</code></dt>
            <dd>An URI identifying the agent. The URI <em class="rfc2119" title="SHOULD">SHOULD</em> be present,
            and <em class="rfc2119" title="SHOULD">SHOULD</em> be a 
            valid <a href="http://www.w3.org/wiki/WebID">WebID</a>, 
            for instance <code>http://example.com/fred#fred</code>
            </dd>
            <dt><code>orcid</code></dt>
            <dd>An <a href="http://orcid.org/">ORCID</a> identifier (as
            an URI). For instance,
            <code>http://orcid.org/0000-0001-9842-9718</code>. An ORCID
             <em class="rfc2119" title="MAY">MAY</em> be present if known.
            </dd>
            <dt><code>name</code></dt>
            <dd>The full <a href="http://xmlns.com/foaf/spec/#term_name">name</a> 
            of the agent. The name <em class="rfc2119" title="SHOULD">SHOULD</em> be present, for instance
            <code>"John Doe"</code> or <code>"University of Manchester"</code></dd>
        </dl>
        Additional <a href="http://xmlns.com/foaf/0.1/">foaf:</a>
        properties <em class="rfc2119" title="MAY">MAY</em> be added to the top-level <code>@graph</code> 
        according to <a href="#custom-json-ld" class="sectionRef sec-ref">section 3.1.2 Custom JSON-LD</a>
        by
        using a <code>@id</code> equal to the creator <code>uri</code>.
        </dd>
        <dt><code>authoredOn</code></dt> <dd>The time the Research
        Object
        was conceptually formed. <em class="rfc2119" title="SHOULD">SHOULD</em> be present if different from
        createdOn. The value <em class="rfc2119" title="MUST">MUST</em> be a 
        <a href="http://www.w3.org/TR/xmlschema-2/#dateTime">xsd:dateTime
        formatted</a> timestamp (ISO 8601)</dd> 

        <dt><code>authoredBy</code></dt> 
        <dd>The author of the Research
            Object, the agent(s) that conceptually formed the <abbr title="Research Object">RO</abbr>. <em class="rfc2119" title="SHOULD">SHOULD</em> be
            present if different from <code>createdBy</code>.
            <em class="rfc2119" title="SHOULD">SHOULD</em> be an object with the same keys and requirements as
            for <code>createdBy</code>, but <em class="rfc2119" title="MAY">MAY</em> be a list to indicate
            multiple authors. 
            <p>
            Additional authorship information (curation, contribution,
            etc) <em class="rfc2119" title="MAY">MAY</em> be added using the 
            <a href="http://purl.org/pav/">pav:</a> namespace 
            within the top-level <code>@graph</code>
            key according to <a href="#custom-json-ld" class="sectionRef sec-ref">section 3.1.2 Custom JSON-LD</a>
            by using an <code>@id</code> value equal to the bundle
            <code>id</code>, e.g. <code>"bundle:"</code>.
            </p>
            </dd>

        <dt><code>history</code></dt> <dd>Provenance
            trace of the life of this <abbr title="Research Object">RO</abbr>, relative to the
            <code>.ro/</code> folder. This property <em class="rfc2119" title="MAY">MAY</em> be present, in
            which case it <em class="rfc2119" title="SHOULD">SHOULD</em> be <code>"evolution.ttl"</code>,
            indicating that the file <code>.ro/evolution.ttl</code>
            contains the provenance trace. 
            This value <em class="rfc2119" title="MAY">MAY</em> be a URI. The property <em class="rfc2119" title="MAY">MAY</em> give a list if
            several provenance traces are known, in which case the list
            <em class="rfc2119" title="SHOULD">SHOULD</em> include <code>"evolution.ttl"</code>.
            <p>
            The file
            <code>.ro/evolution.ttl</code>, if present,
            <em class="rfc2119" title="SHOULD">SHOULD</em> include a provenance trace 
            of this research object 
            according to the <a href="http://purl.org/wf4ever/roevo#">roevo</a> ontology.
            </p></dd>
       <dt><code>aggregates</code></dt> <dd>This property <em class="rfc2119" title="SHOULD">SHOULD</em> be present, in which
       case it <em class="rfc2119" title="MUST">MUST</em> be a list of the resources aggregated by this <abbr title="Research Object">RO</abbr>.
       The values in a list <em class="rfc2119" title="MUST">MUST</em> be either:
       <ul>
        <li>A path relative to the root of the bundle, prefixed with
        <code>bundle:</code></li>
        <li>An absolute URI</li>
        <li>An object, which <em class="rfc2119" title="SHOULD">SHOULD</em> be uniquely identified by either
            <code>file</code> or <code>uri</code>. Its members are:
        <dl>
            <dt><code>file</code></dt> 
                <dd>A path relative to the root of the bundle. The path
                <em class="rfc2119" title="SHOULD">SHOULD</em> be prefixed with <code>bundle:</code></dd>
            <dt><code>uri</code></dt>
                <dd>An absolute URI. The key <code>uri</code> <em class="rfc2119" title="MUST NOT">MUST NOT</em> be provided at the
                same time as <code>file</code>.</dd>
            <dt><code>folder</code></dt>
                <dd>A folder this resource (typically identified by
                <code>uri</code>) belongs to, relative to the
                root of the bundle. The path <em class="rfc2119" title="SHOULD">SHOULD</em> be prefixed with
                <code>bundle:</code> and <em class="rfc2119" title="SHOULD">SHOULD</em> end with <code>/</code>,
                for instance <code>bundle:folder2/</code>.</dd>
            <dt><code>mediatype</code></dt>
                <dd>The <a href="http://www.iana.org/assignments/media-types">IANA
                media type</a> of the (typically identified by
                <code>file</code>) resource. This <em class="rfc2119" title="SHOULD">SHOULD</em> be specified
                for a resource identified by <code>file</code>,
                unless its media type is correctly identified 
                according to 
                <a href="#media-types" class="sectionRef sec-ref">section 2.2.1 Resource media type</a>.
                </dd>
            <dt><code>createdOn</code></dt>
            <dt><code>createdBy</code></dt>
                <dd>
                File creation date and creator, as specified above.
                </dd>
            <dt><code>proxy</code></dt> 
            <dd>
        The identifier for an <a href="http://www.openarchives.org/ore/1.0/datamodel#Proxies">ORE
        proxy</a> [<cite><a class="bibref" href="#bib-ORE">ORE</a></cite>] for the resources as aggregated by this <abbr title="Research Object">RO</abbr>.
        This property is intended the purposes of 
        referring to "resource X as aggregated in research object Y"
        within annotations and in external documents. This property 
        <em class="rfc2119" title="SHOULD">SHOULD</em> be given for external resources aggregated by "uri"
        references, as they could be aggregated in multiple ROs, and <em class="rfc2119" title="MAY">MAY</em>
        be given for other resources.
        <p>
        The proxy identifier <em class="rfc2119" title="SHOULD">SHOULD</em> consist of the prefix <code>proxy:</code> and 
            a lowercased UUID string [<cite><a class="bibref" href="#bib-RFC4122">RFC4122</a></cite>]. For example:
            <code>proxy:d4f09040-272e-467f-9250-59593bd4ac8f</code>
            </p></dd>
        </dl>
        Additional metadata about a resource, if present, <em class="rfc2119" title="SHOULD">SHOULD</em> be 
        added as an annotation (see below).
        </li>
       </ul>
       <p>
       The order of the values in the <code>aggregates</code> list is insignificant, however
       the list <em class="rfc2119" title="MUST NOT">MUST NOT</em> contain duplicate entries. An entry is considered
       duplicate by comparing literal values and members
       <code>file</code> and <code>uri</code> uniformly as URIs [<cite><a class="bibref" href="#bib-URI">URI</a></cite>].
       </p>
      </dd>

      <dt><code>annotations</code></dt> 
      
      <dd>
        Annotations, <em class="rfc2119" title="MAY">MAY</em> be present, in which case it <em class="rfc2119" title="MUST">MUST</em> be a list. An 
        <a href="http://www.openannotation.org/spec/core/">annotation</a>
        provides additional metadata or descriptions which are somewhat
        about or related to the research object or some of its
        aggregated resources. 
        <p>
        An annotation is specified as an object, which have the
        following members:
        </p>
        <dl>
            <dt><code>annotation</code></dt>
            <dd>
            The identifier for this annotation. The identifier <em class="rfc2119" title="SHOULD">SHOULD</em> be
            present, and <em class="rfc2119" title="SHOULD">SHOULD</em>
            consist of the prefix <code>annotation:</code> and 
            a lowercased UUID string [<cite><a class="bibref" href="#bib-RFC4122">RFC4122</a></cite>]. For example:
            <code>annotation:1a876f9e-4ffe-4c99-a05d-cd9d0cbd4cbb</code>
            </dd>

            <dt><code>about</code></dt>
            <dd>The identifier for the annotated resource, <em class="rfc2119" title="MUST">MUST</em> be
            present. This is considered the
            <a href="http://www.openannotation.org/spec/core/20130208/core.html#BodyTarget">target</a>
            of the annotation, that is the resource the annotation
            content is "somewhat about".
            The "about" identifier <em class="rfc2119" title="SHOULD">SHOULD</em> be one of these types:
            <ul>
                <li>The research object itself, which <em class="rfc2119" title="SHOULD">SHOULD</em> match the
                value of its <code>id</code>, e.g.
                <code>bundle:</code></li>
                <li>A bundled resource, starting with
                <code>bundle:</code>, which <em class="rfc2119" title="SHOULD">SHOULD</em> be listed under
                    <code>aggregates</code> if that key is present</li>
                <li>A proxy for an aggregated resource, starting with
                    <code>proxy:</code>, which <em class="rfc2119" title="MUST">MUST</em> be defined under
                    <code>aggregates</code> with a matching
                    value for <code>proxy</code></li>
                <li>Another annotation, starting with
                    <code>annotation:</code>, which <em class="rfc2119" title="MUST">MUST</em> be defined under
                    <code>annotations</code> </li>
                <li>An absolute URI, which may or may not be aggregated by the <abbr title="Research Object">RO</abbr></li>    
                <li>A list, containing any of the above. This indicates
                that the annotation is about each of the listed
                resources, for instance because the annotation content is
                describing their relationships</li>
            </ul>
            </dd>
            <dt><code>content</code></dt>
            <dd>
            The identifier for a resource that contains the 
            <a href="http://www.openannotation.org/spec/core/20130208/core.html#BodyTarget">body</a>
            of the annotation, <em class="rfc2119" title="SHOULD">SHOULD</em> be present. The content identifier <em class="rfc2119" title="SHOULD">SHOULD</em> be one of these
            types:
            <ul>
                <li>A bundled resource, starting with
                <code>bundle:</code>, which <em class="rfc2119" title="SHOULD">SHOULD</em> be listed under
                    <code>aggregates</code> if that key is present</li>
                <li>An absolute URI, which may or may not be aggregated by the <abbr title="Research Object">RO</abbr></li>    
            </ul>
            </dd>
        </dl>
            Additional properties describing the annotation using the
            <a href="http://www.w3.org/ns/oa#">oa:</a> namespace 
            <em class="rfc2119" title="MAY">MAY</em> be added to the top-level <code>@graph</code> 
            according to <a href="#custom-json-ld" class="sectionRef sec-ref">section 3.1.2 Custom JSON-LD</a>
            by using a <code>@id</code> matching the
            <code>annotation</code> identifier.
      </dd>

      <dt><code>@graph</code></dt> <dd>A list of additional [<cite><a class="bibref" href="#bib-JSON-LD">JSON-LD</a></cite>]
      statements according to 
      <a href="#custom-json-ld" class="sectionRef sec-ref">section 3.1.2 Custom JSON-LD</a>.
      </dd>

            

    </dl>
    <p>
    An example of a manifest which is valid JSON-LD is included below:
    </p>
<div class="example"><div class="example-title"><span>Example 3</span></div><pre class="example">{
  "@context":  [
    { "@base": "widget://129b8efe-a692-48a0-85d4-ebc6c0a9b057/.ro/" },
    "http://purl.org/wf4ever/ro-bundle/context.json"
  ],
  "id": "/",
  "manifest":  "manifest.json",
  "createdOn": "2013-03-05T17:29:03Z",
  "createdBy": {
      "uri":     "http://example.com/foaf#alice",
      "orcid":   "http://orcid.org/0000-0002-1825-0097",
      "name":    "Alice W. Land" },
  "history":   "evolution.ttl",
  "aggregates": [
     "/folder/soup.jpeg",
     "http://example.com/blog/",

     { "file":      "/README.txt",
       "mediatype": "text/plain",
       "createdBy": {
           "uri":     "http://example.com/foaf#bob",
           "name":    "Bob Builder" },
       "createdOn": "2013-02-12T19:37:32.939Z" },

     { "uri":    "http://example.com/external.txt",
       "folder": "/folder/",
       "proxy":  "uuid:a0cf8616-bee4-4a71-b21e-c60e6499a644" }
  ],
  "annotations": [
    { "annotation": "uuid:d67466b4-3aeb-4855-8203-90febe71abdf",
      "about":      "/folder/soup.jpeg",
      "content":    "annotations/soup-properties.ttl" },

    { "about":   "uuid:a0cf8616-bee4-4a71-b21e-c60e6499a644",
      "content": "http://example.com/blog/they-aggregated-our-file" },

    { "about":   [ "/", "uuid:d67466b4-3aeb-4855-8203-90febe71abdf" ],
      "content": "annotations/a-meta-annotation-in-this-ro.txt" }
  ]
}</pre></div>

    <section id="json-ld">
    <h4><span class="secno">3.1.1 </span>JSON-LD and mapping to <abbr title="Research Object">RO</abbr> model</h4>
    <p>
    Manifests following the JSON structure defined in 
    <a href="#manifest-json" class="sectionRef sec-ref">section 3.1 .ro/manifest.json</a> with a
    <code>"@context":
        "http://purl.org/wf4ever/ro-bundle/context.json"</code>
    is intended to be valid [<cite><a class="bibref" href="#bib-JSON-LD">JSON-LD</a></cite>] without any additional
    modifications.  Mapping <code>.ro/manifest.json</code> to the
    ORE and [<cite><a class="bibref" href="#bib-RO">RO</a></cite>] models in RDF <em class="rfc2119" title="SHOULD">SHOULD</em> be performed according to the
    algorithm for <a href="http://json-ld.org/spec/latest/json-ld-api/#convert-to-rdf-algorithm">conversion
    from JSON to RDF</a>, as specified in the JSON-LD API [<cite><a class="bibref" href="#bib-JSON-LD">JSON-LD</a></cite>].  
    </p>
    <p class="TODO">Describe JSON-LD context</p>
    <div class="example"><div class="example-title"><span>Example 4</span></div><pre class="example">{
  "@context": {
    "ao": "http://purl.org/ao/",
    "oa": "http://www.w3.org/ns/oa#",
    "dc": "http://purl.org/dc/elements/1.1/",
    "dct": "http://purl.org/dc/terms/",
    "ore": "http://www.openarchives.org/ore/terms/",
    "ro": "http://purl.org/wf4ever/ro#",
    "roterms": "http://purl.org/wf4ever/roterms#",
    "robundle": "http://purl.org/wf4ever/robundle#",
    "prov": "http://www.w3.org/ns/prov#",
    "pav": "http://purl.org/pav/",
    "xsd": "http://www.w3.org/2001/XMLSchema#",
    "foaf": "http://xmlns.com/foaf/0.1/",
    "uuid": "urn:uuid:",

    "id": "@id",
    "file": "@id",
    "uri": "@id",
    "annotation": "@id",

    "manifest": {
        "@id": "ore:isDescribedBy",
        "@type": "@id"
    },

    "createdOn": {
        "@id": "pav:createdOn",
        "@type": "xsd:dateTime"
    },
    "createdBy": {
        "@id": "pav:createdBy",
        "@type": "@id"
    },
    "authoredOn": {
        "@id": "pav:authoredOn",
        "@type": "xsd:dateTime"
    },
    "authoredBy": {
        "@id": "pav:authoredBy",
        "@type": "@id"
    },
    "curatedOn": {
        "@id": "pav:curatedOn",
        "@type": "xsd:dateTime"
    },
    "curatedBy": {
        "@id": "pav:curatedBy",
        "@type": "@id"
    },
    "contributedOn": {
        "@id": "pav:contributedOn",
        "@type": "xsd:dateTime"
    },
    "contributedBy": {
        "@id": "pav:contributedBy",
        "@type": "@id"
    },
    "name": {
        "@id": "foaf:name"
    },
    "orcid": {
        "@id": "roterms:orcid",
        "@type": "@id"
    },

    "history": {
        "@id": "prov:has_provenance",
        "@type": "@id"
    },
    "aggregates": {
      "@id": "ore:aggregates",
      "@type": "@id"
    },
    "mediatype": {
        "@id": "dc:format"
    },
    "folder": {
      "@id": "robundle:inFolder",
      "@type": "@id"
    },
    "proxy": {
      "@id": "robundle:hasProxy",
      "@type": "@id"
    },

    "annotations": {
      "@id": "robundle:hasAnnotation",
      "@type": "@id"
    },
    "content": {
       "@id": "oa:hasBody",
       "@type": "@id"
    },
    "about": {
       "@id": "oa:hasTarget",
       "@type": "@id" 
    }

  }
}</pre></div>
    <p>
    As an example of this processing, below is a Turtle
    representation after processing the <code>.ro/manifest.json</code>
    shown as an example in 
    <a href="#manifest-json" class="sectionRef sec-ref">section 3.1 .ro/manifest.json</a>:
    </p>

    <div class="example"><div class="example-title"><span>Example 5</span></div><pre class="example"></pre></div>
    <p class="TODO">Generate example</p>
    </section>

    <section id="custom-json-ld">
    <h4><span class="secno">3.1.2 </span>Custom JSON-LD</h4>
    <p>
    Applications who support JSON-LD (rather than just JSON)
    <em class="rfc2119" title="MAY">MAY</em> choose to parse and generate additional statements 
    in <code>.ro/manifest.json</code>
    according to the [<cite><a class="bibref" href="#bib-JSON-LD">JSON-LD</a></cite>] specifications. 
    </p>
    <p>
    Applications generating JSON-LD <em class="rfc2119" title="MAY">MAY</em> use a <code>@context</code>
    list, but <em class="rfc2119" title="SHOULD">SHOULD</em> include 
    <code>http://purl.org/wf4ever/bundle/context.json</code>
    as the last item in the list to indicate to JSON parsers that 
    the manifest can be parsed as plain JSON according to 
    <a href="#manifest-json" class="sectionRef sec-ref">section 3.1 .ro/manifest.json</a>.
    Applications <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> use <code>@context</code> at deeper nexting
    levels, except within the top level <code>@graph</code>.
    </p>
    <p>
    Applications <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> write additional properties directly
    to JSON-LD nodes defined from 
    <a href="#manifest-json" class="sectionRef sec-ref">section 3.1 .ro/manifest.json</a>.
    Instead, additional statements <em class="rfc2119" title="SHOULD">SHOULD</em> be made within an
    additional <code>@graph</code> node according to 
    <a href="http://json-ld.org/spec/latest/json-ld-syntax/#named-graphs">JSON-LD
        Named Graphs</a>. <code>@graph</code> <em class="rfc2119" title="SHOULD">SHOULD</em> only be
    added to the top-level object.
    For example:
    </p>
    <pre>{
  "@context": "http://purl.org/wf4ever/ro-bundle/context.json",
  "id": "bundle:",
  "manifest": "manifest.json",
  "aggregates": [
     "http://example.com/blog/2012",
     "http://example.com/blog/2013"
  ],
  "@graph": [
    { "@id": "http://example.com/blog/2013",
      "dcterms:replaces": "http://example.com/blog/2012" },
    { "@id": "http://example.com/blog/2013",
      "dcterms:isReplacedBy": "http://example.com/blog/2013" }
  ]
}
    </pre>
    <p>
    Note that rather than using the above extension mechanism, 
    it is generally <em class="rfc2119" title="RECOMMENDED">RECOMMENDED</em> 
    to instead store such additional statements in 
    an <a href="http://wf4ever.github.com/ro/#annotations-example-sec">annotation body</a>
    for purposes of provenance and separation of concern. Although
    technically valid, it is <em class="rfc2119" title="NOT RECOMMENDED">NOT RECOMMENDED</em> to use the member
    <code>@graph</code> to embed semantic annotation bodies 
    within <code>annotations</code> nodes, as it would duplicate the
    content of the annotation body in the bundle and may lead to 
    inconsistencies.
    </p>
        </section>
    </section>

    <section id="alternative-manifest-representations">
        <h3><span class="secno">3.2 </span>Alternative manifest representations</h3>
        <p>In addition to the <code>.ro/manifest.json</code> representation
        specified in <a href="#manifest-json" class="sectionRef sec-ref">section 3.1 .ro/manifest.json</a>, a
        Research Object Bundle <em class="rfc2119" title="MAY">MAY</em> include the ORE manifest in
        alternative representations like RDF/XML
        [<cite><a class="bibref" href="#bib-RDF-SYNTAX-GRAMMAR">RDF-SYNTAX-GRAMMAR</a></cite>] and Turtle [<cite><a class="bibref" href="#bib-TURTLE">TURTLE</a></cite>], for instance by
        generating them using the <a href="http://json-ld.org/spec/latest/json-ld-api/#convert-to-rdf-algorithm">conversion
       from JSON to RDF</a> algorithm in JSON-LD API [<cite><a class="bibref" href="#bib-JSON-LD">JSON-LD</a></cite>].
        </p>
        <ul>
          <li>
            Alternative manifests <em class="rfc2119" title="SHOULD">SHOULD</em> have a path starting with
            <code>.ro/manifest</code>, for instance
            <code>.ro/manifest.ttl</code> for a Turtle representation. 
          </li><li>
            When multiple
            manifests are present, applications <em class="rfc2119" title="SHOULD">SHOULD</em> consider
            <code>.ro/manifest.json</code> as the authorative representation of
            the research object.
          </li><li>
            Alternative manifests <em class="rfc2119" title="SHOULD">SHOULD</em>
            represent the equivalent RDF graph of
            <code>.ro/manifest.json</code> 
            (see <a href="#json-ld" class="sectionRef sec-ref">section 3.1.1 JSON-LD and mapping to RO model</a>)
          </li><li>
            Alternative manifests <em class="rfc2119" title="SHOULD">SHOULD</em> be listed in the
            <code>META-INF/container.xml</code> as
            <code>&lt;rootfile&gt;</code> entries with corresponding
            <code>media-type</code> attributes.
          </li><li>
            Any alternative manifest listed as a <em>rootfile</em> <em class="rfc2119" title="MUST">MUST</em>
            minimally represent the same conceptual information as
            <code>.ro/manifest.json</code> 
          </li>
    </ul>
      </section>
    </section>
    
    <section id="identifiers" class="informative">
        <!--OddPage--><h2><span class="secno">4. </span>Identifiers</h2><p><em>This section is non-normative.</em></p>
        <p>
        Objects in a research object bundle are identified within the
        JSON manifest using different JSON-LD prefixes, which could
        be thought of as local URI schemes, which resolves to relative
        URI references based at the root of the ZIP archive.
        </p>
        <table id="prefix">
            <tbody><tr><th>Prefix</th> <th>Relative URI reference</th>
            </tr><tr><td><em>(no prefix)</em></td> <td><code>.ro/</code></td> </tr>
            <tr><td><code>bundle:</code></td> <td><code>./</code></td> </tr>
            <tr><td><code>proxy:</code></td> <td><code>.ro/proxies/</code></td> </tr>
            <tr><td><code>annotation:</code></td> <td><code>.ro/annotations/</code></td> </tr>
            <tr><td><em>(other)</em></td> <td><em>Absolute URI</em></td> </tr>
        </tbody></table>
        <p>
        Due to their nature as ZIP files, Research Object Bundles might
        be downloaded, copied, moved and republished. In order to avoid 
        ambiguity about <abbr title="Research Object">RO</abbr> identity and evolution, each Research Object Bundle 
        serialization is considered to represent unique Research Objects.
        Thus any of the prefixes above describing resources within the 
        bundle are relative to the root of the ZIP file, and the
        <code>id</code> identifying the Research Object is set to
        <code>bundle:</code>, meaning the root represents the <abbr title="Research Object">RO</abbr> itself.
        </p>
        <p>
        </p><section id="absolute-uris">
            <h3><span class="secno">4.1 </span>Absolute URIs for bundle resources</h3><p><em>This section is non-normative.</em></p>
            <p>
            Applications which require an absolute URI for identifying a
            resource within a Research Object Bundle may choose to use
            one of the approaches presented in this section in
            combination with resolving against the <a href="#prefix">prefix
            table</a> above. 
            </p>
            <div class="TODO">No decission has been made on which of these
                methods - if any - should be recommended; meanwhile these
                subsections contain a list of advantages and
                disadvantages to guide the reader.
            kept</div>
            <section id="path-uris">
            <h4><span class="secno">4.1.1 </span>Nested paths</h4><p><em>This section is non-normative.</em></p>
            If an <abbr title="Research Object">RO</abbr> bundle is published at a HTTP (or HTTPS) server,
            then URIs to the bundled resources can be minted by
            assuming a base URI of the <abbr title="Research Object">RO</abbr> Bundle URI with <code>/</code>
            appended. 
            For instance, if:
            <pre>http://example.com/example1.robundle</pre>
            contains the file <code>folder/helloworld.txt</code>
            (<code>bundle:folder/helloworld.txt</code> in the
            manifest.json), then we can assume the base URI:
            <pre>http://example.com/example1.robundle/</pre>
            and can refer to the file as:
            <pre>http://example.com/example1.robundle/folder/helloworld.txt</pre>
            <p>
            A web server that exposes <abbr title="Research Object">RO</abbr> bundles <em class="rfc2119" title="MAY">MAY</em> support resolving
            such nested URIs by internally extracting the resources from
            the ZIP archive or redirecting to an existing resource, 
            for instance because it is implementing the [<cite><a class="bibref" href="#bib-ROSRS">ROSRS</a></cite>] API.
            </p>
            <p>
            Semantically, the distinction between the URI with or
            without the trailing <code>/</code> is that say
            <code>example1.robundle</code> identifies the <abbr title="Research Object">RO</abbr> Bundle,
            e.g. the ZIP archive, which has attributes such as size in
            bytes, checksum, etc, while <code>example1.robundle/</code>
            identifies the slightly more abstract concept of the
            Research Object (the aggregation) that is serialized as a <abbr title="Research Object">RO</abbr>
            bundle. 
            </p>
            <p>
            Advantages:
            </p>
            <ul>
                <li>Relative URI references within the <abbr title="Research Object">RO</abbr> bundle
                can be interpreted by using the calculated base URI.</li>
                <li>Relative URI references between resources resolve
                consistently (for instance <code>img/picture.jpeg</code> linked
                from
                <code>http://example.com/example1.robundle/document.html</code>
                resolves to
                <code>http://example.com/example1.robundle/img/picture1.jpeg</code>)</li>
                <li>Web server could optionally handle request and
                expose nested resources (or at least redirect to the ZIP
                file)</li>
                <li>Fragment identifiers within resources are still
                valid</li>
            </ul>
            <p>Disadvantages</p>
            <ul>
                <li>Resolving the nested URIs would generally give a
                misleading 404 Not Found</li>
                <li>Could encourage minting of URIs in namespaces 
                manage by others</li>
                <li>Given such a URI, to find the <abbr title="Research Object">RO</abbr> bundle, one might
                have to assume that everything after
                <code>.robundle</code>
                should be removed. (URL hacking).
                </li><li>Malicious or malformed URI references within <abbr title="Research Object">RO</abbr>
                bundles might be resolved to expose local resources,
                specially within the <code>file</code> scheme. 
                For instance the reference <code>../../etc/passwd</code> from
                <code>file:///tmp/example1.robundle/evil.html</code>
                could be resolved to
                <code>file:///etc/passwd</code></li>
            </ul>
            <p>
            This technique <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> be used if:
            </p>
            <ul>
                <li>The URI for the <abbr title="Research Object">RO</abbr> bundle is not using a
                hierarchical scheme (e.g.
                <code>urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6</code>)
                </li><li>The URI for the <abbr title="Research Object">RO</abbr> bundle contains a query or
                fragment identifier, e.g,
                <code>http://example.com/ro?id=13</code></li>
                <li>The web server is not under the control of the
                minter of the URIs</li>
            </ul>
            </section>
            <section id="hash-uris">
            <h4><span class="secno">4.1.2 </span>Fragment identifiers</h4>
                The IANA media type registration for <a href="http://www.iana.org/assignments/media-types/application/zip">application/zip</a>
                and the <a href="http://tools.ietf.org/html/rfc6839#section-3.6">+zip
                    suffix</a> of [RFC6839] does not define fragment
                identifiers for ZIP archives. However, <abbr title="Research Object">RO</abbr> bundles
                identified with the recommended media type of
                <code>application/vnd.wf4ever.robundle+zip</code>
                <em class="rfc2119" title="MAY">MAY</em> be interpreted to have a fragment identifier
                that is resolvable as the path within the ZIP archive.
                <p>
                    For instance, if:
                </p><pre>http://example.com/example1.robundle</pre>
                contains the file <code>folder/helloworld.txt</code>
                (<code>bundle:folder/helloworld.txt</code> in the
                manifest.json), then we can refer to the Research Object as
                <pre>http://example.com/example1.robundle#</pre>
                and can refer to the file as:
                <pre>http://example.com/example1.robundle#folder/helloworld.txt</pre>
                Advantages:
                <ul>
                    <li>URIs always resolve (to the ZIP file)</li>
                    <li>Simple to understand</li>
                </ul>
                Disadvantages:
                <ul>
                    <li>Not formally defined by application/zip</li>
                    <li>Fragment identifiers are bound by the media type and
                    might not work for other content types.
                    (e.g. an <abbr title="Research Object">RO</abbr> bundle was returned due to content
                    negotiation in a server implenting the [<cite><a class="bibref" href="#bib-ROSRS">ROSRS</a></cite>] API)</li>
                    <li>Relative URI references in resources more complicated to
                    resolve as they would easily seem to refer to siblings
                    of the <abbr title="Research Object">RO</abbr> bundle, a URI reference <code>img.jpg</code>
                    from
                    <code>http://exaxmple.com/example1.robundle#document.html</code>
                    would seem to refer to <code>http://exaxmple.com/img.jpg</code></li>
                    <li>Existing fragment identifiers within resources more
                    complicated to resolve - <code>#para2</code> in
                    <code>document.html</code> becomes
                    <code>http://example.com/example1.robundle#document.html#para2</code>
                </li></ul>
            </section>
            <section id="jar">
            <h4><span class="secno">4.1.3 </span>jar: scheme</h4>
            The <a href="http://www.iana.org/assignments/uri-schemes/prov/jar">jar:</a>
            scheme is used by Java to refer to resources within JAR
            files. It is specified as part of the documentation for <a href="http://docs.oracle.com/javase/7/docs/api/java/net/JarURLConnection.html">JarURLConnection</a>.
            In short, a JAR URI is formed by combining
            <code>jar:</code>, the original URI of the JAR file,
            the separator <code>!/</code>, and the path within the JAR
            file.  For all practical purposes, an <abbr title="Research Object">RO</abbr> bundle, being a ZIP
            archive, can be interpreted as a <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html">JAR file</a>.  For instance, if:
            <pre>http://example.com/example1.robundle</pre>
            contains the file <code>folder/helloworld.txt</code>
            (<code>bundle:folder/helloworld.txt</code> in the
            manifest.json), then we can assume the base URI
            <pre>jar:http://example.com/example1.robundle!/</pre>
            and can refer to the file as:
            <pre>jar:http://example.com/example1.robundle!/folder/helloworld.txt</pre>
            <p>
            Advantages:
            </p><ul>
                <li>Somewhat resolvable (within Java)</li>
                <li>Somewhat formally defined</li>
                <li>Fragment identifiers within resources still valid</li><li>
            </li></ul>
            <p>
            Disadvantages:
            </p><ul>
                <li>The <code>jar:</code> scheme is not hierarchical (it
                does not use <code>//</code>, and so relative URI
                references within <abbr title="Research Object">RO</abbr> bundle resources are
                not correctly resolved (not even by java.net.URI). 
                </li><li>
                </li><li>Misleading and potentially confusing: JAR files have
                their own <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#JAR_Manifest">manifest</a>
                in <code>META-INF/MANIFEST.MF</code>.</li>
                <li>Gives impression that <abbr title="Research Object">RO</abbr> Bundle is executable with JAva</li>
            </ul>
            </section>
            <section id="widget">
            <h4><span class="secno">4.1.4 </span>Widget URI scheme</h4>
            <p>
            The <a href="http://www.w3.org/TR/widgets-uri/">Widget URI
                scheme</a> defines how a URI can be formed for the
            purposes of accessing resources within a ZIP file as if it
            was a HTTP server. While this is intended for sandboxing <a href="http://www.w3.org/TR/widgets/">Packaged web
            apps</a>, it is equally applicable to Research Object
        bundles for the purposes of sandboxing.
            </p><p>
            The Widget URI scheme recommends
            generating a UUID string [<cite><a class="bibref" href="#bib-RFC4122">RFC4122</a></cite>] for minting the <em>authority</em>,
            forming the base URI for the <abbr title="Research Object">RO</abbr> bundle. 
            For instance, if:
            </p><pre>http://example.com/example1.robundle</pre>
            contains the file <code>folder/helloworld.txt</code>
            (<code>:bundle:folder/helloworld.txt</code> in the
            manifest.json), then we generate a new UUID 
            <code>8191dee8-0b8e-452d-8d64-7706a140185e</code> and 
            refer to the Research Object as
            <pre>widget://8191dee8-0b8e-452d-8d64-7706a140185e/</pre>
            and can refer to the file as:
            <pre>widget://8191dee8-0b8e-452d-8d64-7706a140185e/folder/helloworld.txt</pre>
            <p>
            For purposes of security/sandboxing when interpreting <abbr title="Research Object">RO</abbr>
            bundles, the authority should be a <a href="http://tools.ietf.org/html/rfc4122#section-4.4">v4
                UUID
            from random numbers</a>. For purposes of describing the
        content of an <abbr title="Research Object">RO</abbr> bundle at a given URI, the authority should be 
        <a href="http://tools.ietf.org/html/rfc4122#section-4.3">Name
            based UUID</a> using v5 (SHA-1 hashing). For purposes of
            describing the content of an <abbr title="Research Object">RO</abbr> bundle as a bytestream
            independent of its location (for instance on a USB stick),
            then the authority should be the hexadecimal SHA-256
            checksum of the ZIP archive.
            </p>
            <p>Example widget base URIs</p>
            <ul>
                <li><code>widget://15259726-dcbb-42ff-8fc6-36282c98d4e6/</code> 
                <em>UUID v4 using pseduo-random number</em></li>
                <li><code>widget://7878e885-327c-5ad4-9868-7338f1f13b3b/</code>
                    <em>UUID v5 of the URL
                        <code>http://example.com/bundle1.robundle</code></em></li>
                <li><code>widget://587cff3ae37d58af6886d656623bd91237759a42d8fe1575a9744898c01d97d7/</code>
                    <em>SHA-256 of an empty <abbr title="Research Object">RO</abbr> bundle</em></li>
            </ul>
            <div class="TODO">
            Recommend just ONE of these? Which?
            </div>

            <p>Advantages:</p>
            <ul>
                <li>Relative URIs and fragments are valid without
                modifications</li><li>
                </li><li>Sandboxed by <abbr title="Research Object">RO</abbr> bundle</li>
                <li>Defined (HTTP-like) resolution mechanism</li>
                <li>Predictable base URIs (UUIDv5 based on URL or
                    SHA-256 based on bytes)
            </li></ul>
            <p>Disadvantages:</p>
            <ul>
                <li>Can't be dereferenced</li>
                <li>Status is W3C WG Note, was abandoned as W3C
                Specification (Check: meaning what?)</li>
            </ul>
            </section>
        </section>
    </section>
    <section id="conformance"><!--OddPage--><h2><span class="secno">5. </span>Conformance</h2>
<p>
  As well as sections marked as non-normative, all authoring guidelines, diagrams, examples,
  and notes in this specification are non-normative. Everything else in this specification is
  normative.
</p>
<p>
  The key words <em class="rfc2119" title="MUST">MUST</em>, <em class="rfc2119" title="MUST NOT">MUST NOT</em>, <em class="rfc2119" title="REQUIRED">REQUIRED</em>, <em class="rfc2119" title="SHOULD">SHOULD</em>, <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em>, <em class="rfc2119" title="RECOMMENDED">RECOMMENDED</em>, <em class="rfc2119" title="MAY">MAY</em>,
  and <em class="rfc2119" title="OPTIONAL">OPTIONAL</em> in this specification are to be interpreted as described in [<cite><a class="bibref" href="#bib-RFC2119">RFC2119</a></cite>].
</p>
</section>

    <!--<a href="#general-structure" class="sectionRef"></a> -->
    <section class="appendix" id="acknowledgements">
      <!--OddPage--><h2><span class="secno">A. </span>Acknowledgements</h2>
      <p>
        Thanks to Khalid Belhajjame, Graham Klyne and Piotr Holubowicz
        for reviewing this specification. The underlying work 
        has been funded as part of the
        <a href="http://www.wf4ever-project.org/"><abbr title="Workflow forever">Wf4Ever</abbr> project</a>,
        funded by the <a href="http://cordis.europa.eu/fp7/">European
            Commisson's FP7 programme</a> (FP7-ICT-2007-6 270192).
        
        Many thanks to Robin Berjon for making <a href="http://dev.w3.org/2009/dap/ReSpec.js/documentation.html">ReSpec.js</a>
        which generated this page.
      </p>
    </section>
  

<section id="references" class="appendix"><!--OddPage--><h2><span class="secno">B. </span>References</h2><section id="normative-references"><h3><span class="secno">B.1 </span>Normative references</h3><dl class="bibliography"><dt id="bib-JSON-LD">[JSON-LD]</dt><dd>Manu Sporny; Gregg Kellogg; Markus Lanthaler. <a href="http://www.w3.org/TR/json-ld/"><cite>JSON-LD 1.0</cite></a>. 11 April 2013. W3C Working Draft. URL: <a href="http://www.w3.org/TR/json-ld/">http://www.w3.org/TR/json-ld/</a>
</dd><dt id="bib-ORE">[ORE]</dt><dd><cite><a href="http://www.openarchives.org/ore/1.0/toc.html">Open Archives Initiative Object Reuse and Exchange</a></cite>. <em>ORE Specifications and User Guides.</em> URL: <a href="http://www.openarchives.org/ore/1.0/toc.html">http://www.openarchives.org/ore/1.0/toc.html</a>
</dd><dt id="bib-RFC2119">[RFC2119]</dt><dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key words for use in RFCs to Indicate Requirement Levels.</cite></a> March 1997. Internet RFC 2119.  URL: <a href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a> 
</dd><dt id="bib-RFC4627">[RFC4627]</dt><dd>D. Crockford. <a href="http://www.ietf.org/rfc/rfc4627.txt"><cite>The application/json Media Type for JavaScript Object Notation (JSON) (RFC 4627)</cite></a>. July 2006. RFC. URL: <a href="http://www.ietf.org/rfc/rfc4627.txt">http://www.ietf.org/rfc/rfc4627.txt</a>
</dd><dt id="bib-RO">[RO]</dt><dd>Stian Soiland-Reyes; Sean Bechhofer et al.: <cite><a href="http://purl.org/wf4ever/model">Wf4Ever Research Object Model</a></cite>. 30 November 2012. URL: <a href="http://purl.org/wf4ever/model">http://purl.org/wf4ever/model</a>
</dd><dt id="bib-UCF">[UCF]</dt><dd>Adobe: <cite><a href="https://learn.adobe.com/wiki/display/PDFNAV/Universal+Container+Format">Universal Container Format</a></cite>. URL: <a href="https://learn.adobe.com/wiki/display/PDFNAV/Universal+Container+Format">https://learn.adobe.com/wiki/display/PDFNAV/Universal+Container+Format</a> accessed 2013-02-28.
</dd></dl></section><section id="informative-references"><h3><span class="secno">B.2 </span>Informative references</h3><dl class="bibliography"><dt id="bib-OCF">[OCF]</dt><dd>James Pritchett; Markus Gylling: <cite><a href="http://idpf.org/epub/30/spec/epub30-ocf-20111011.html">EPUB Open Container Format (OCF) 3.0</a>. Recommended Specification 11 October 2011. International Digital Publishing Forum (IDPF). URL: <a href="http://idpf.org/epub/30/spec/epub30-ocf-20111011.html">http://idpf.org/epub/30/spec/epub30-ocf-20111011.html</a>
</cite></dd><dt id="bib-ODF">[ODF]</dt><dd>Rob Weir; Michael Brauer; Patrick Durusau; Dennis Hamilton: Open Document Format for Office Applications (OpenDocument) Version 1.3, Part 3: Packages. OASIS Standard. 29 September 2011. URL: <a href="">http://docs.oasis-open.org/office/v1.2/OpenDocument-v1.2-part3.html
</a></dd><dt id="bib-RDF-SYNTAX-GRAMMAR">[RDF-SYNTAX-GRAMMAR]</dt><dd>Dave Beckett. <a href="http://www.w3.org/TR/2004/REC-rdf-syntax-grammar-20040210"><cite>RDF/XML Syntax Specification (Revised)</cite></a>. 10 February 2004. W3C Recommendation. URL: <a href="http://www.w3.org/TR/2004/REC-rdf-syntax-grammar-20040210">http://www.w3.org/TR/2004/REC-rdf-syntax-grammar-20040210</a>
</dd><dt id="bib-RFC4122">[RFC4122]</dt><dd>P. Leach; M. Mealling; R. Salz. <a href="http://www.ietf.org/rfc/rfc4122.txt"><cite>A Universally Unique IDentifier (UUID) URN Namespace (RFC 4122)</cite></a>. July 2005. RFC. URL: <a href="http://www.ietf.org/rfc/rfc4122.txt">http://www.ietf.org/rfc/rfc4122.txt</a>
</dd><dt id="bib-RFC6839">[RFC6839]</dt><dd>T. Hansen; A. Melnikov: <cite><a href="http://tools.ietf.org/html/rfc6839">Additional Media Type Structured Syntax Suffixes</a></cite> January 2013. RFC 6839. URL: <a href="http://tools.ietf.org/html/rfc6839">http://tools.ietf.org/html/rfc6839</a>
</dd><dt id="bib-ROPrimer">[ROPrimer]</dt><dd>Jun Zhao et al: <cite><a href="http://purl.org/wf4ever/ro-primer">Wf4Ever Research Object Ontologies and Vocabularies Primer</a></cite>. 13 April 2012. URL: <a href="http://purl.org/wf4ever/primer">http://purl.org/wf4ever/primer</a> accessed 2013-02-27
</dd><dt id="bib-ROSRS">[ROSRS]</dt><dd>Piotr Holubowicz; Graham Klyne et al.: <cite><a href="http://www.wf4ever-project.org/wiki/display/docs/RO+SRS+interface+6">RO SRS interface 6</a></cite>. 21 December 2012. URL: <a href="http://www.wf4ever-project.org/wiki/display/docs/RO+SRS+interface+6">http://www.wf4ever-project.org/wiki/display/docs/RO+SRS+interface+6</a>
</dd><dt id="bib-TURTLE">[TURTLE]</dt><dd>David Beckett; Tim Berners-Lee. <a href="http://www.w3.org/TeamSubmission/turtle/"><cite>Turtle: Terse RDF Triple Language</cite></a>. January 2008. W3C Team Submission. URL: <a href="http://www.w3.org/TeamSubmission/turtle/">http://www.w3.org/TeamSubmission/turtle/</a>
</dd><dt id="bib-URI">[URI]</dt><dd>T. Berners-Lee; R. Fielding; L. Masinter. <a href="http://www.ietf.org/rfc/rfc3986.txt"><cite>Uniform Resource Identifiers (URI): generic syntax</cite></a>. January 2005. RFC 3986. URL: <a href="http://www.ietf.org/rfc/rfc3986.txt">http://www.ietf.org/rfc/rfc3986.txt</a>
</dd><dt id="bib-ZIP">[ZIP]</dt><dd>PKWare Inc: <cite><a href="http://www.pkware.com/support/zip-app-note"></a>.ZIP File Format Specification</cite> version 6.3.3 (2012-09-01). URL: <a href="http://www.pkware.com/documents/casestudies/APPNOTE.TXT">http://www.pkware.com/documents/casestudies/APPNOTE.TXT</a>
</dd></dl></section></section></body></html>

